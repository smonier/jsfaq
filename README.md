# jsfaq ‚Äî Jahia FAQ Module

A modern, SEO-optimized FAQ module for **Jahia 8.2+** built with JavaScript/TypeScript. This module provides a complete FAQ solution with server-side rendering, client-side interactivity, and schema.org structured data for enhanced search engine visibility.A modern, SEO-optimized FAQ module for **Jahia 8.2+** built with JavaScript/TypeScript. This module provides a complete FAQ solution with server-side rendering, client-side interactivity, and schema.org structured data for enhanced search engine visibility.A modern, SEO-optimized FAQ module for **Jahia 8.2+** built with JavaScript/TypeScript. This module provides a complete FAQ solution with server-side rendering, client-side interactivity, and schema.org structured data for enhanced search engine visibility.SEO-ready FAQ experience for Jahia. `jsfaq` renders semantic FAQ content server-side for instant readability, enriches pages with schema.org JSON-LD, and hydrates lightweight islands to power search, tag filtering, featured ordering, and collapsible questions without a Java backend.

## üéØ Features

### SEO & Performance### SEO & Performance## Key Features

- **Schema.org JSON-LD**: Automatic FAQPage structured data generation for rich search results- **Schema.org JSON-LD**: Automatic FAQPage structured data generation for rich search results- Server-rendered FAQPage markup with schema.org compliant JSON-LD (Question/Answer) emitted once per page.

- **Server-Side Rendering**: Full content rendered server-side, works without JavaScript

- **Progressive Enhancement**: Interactive features added via client-side hydration- **Server-Side Rendering**: Full content rendered server-side, works without JavaScript

- **Keyword Highlighting**: Search terms automatically highlighted in results

- **Progressive Enhancement**: Interactive features added via client-side hydration### SEO & Performance- Search box with full-text matching on questions and answers, tag filters, featured-first ordering, and ‚Äúcopy link‚Äù shortcuts.

### Interactive Features

- **Keyword Highlighting**: Search terms automatically highlighted in results

- **Real-time Search**: Full-text search across questions and answers

- **Collapsible Items**: Click to expand/collapse FAQ items with smooth animations- **Schema.org JSON-LD**: Automatic FAQPage structured data generation for rich search results- Keyboard-accessible collapsible questions that preserve state via URL hashes (`#q-<uuid>`).

- **Auto-expand on Search**: Matching items automatically open with highlighted keywords

- **Tag Filtering**: Filter questions by Jahia's native tags (`jmix:tagged`) with visual feedback### Interactive Features

- **Featured Items**: Highlight important questions

- **Server-Side Rendering**: Full content rendered server-side, works without JavaScript- Multilingual authoring with localized strings (EN/FR bundled) and JSON-driven hydrations.

### Developer Experience

- **Real-time Search**: Full-text search across questions and answers

- **TypeScript**: Full type safety throughout the codebase

- **CSS Modules**: Scoped styling with no conflicts- **Collapsible Items**: Click to expand/collapse FAQ items with smooth animations- **Progressive Enhancement**: Interactive features added via client-side hydration- Lightweight <25‚ÄØKB client island that lazy-loads on visibility and respects `prefers-reduced-motion`.

- **Hot Reload**: Development mode with instant updates

- **Modern Tooling**: Vite build system, ESLint, Prettier- **Auto-expand on Search**: Matching items automatically open with highlighted keywords

## üìã Requirements- **Tag Filtering**: Filter questions by Jahia's native tags (`jmix:tagged`)- **Keyword Highlighting**: Search terms automatically highlighted in results

- **Jahia**: Version 8.2 or higher- **Featured Items**: Highlight important questions

- **Node.js**: Version 22.0.0 or higher

- **Yarn**: Version 4.10.3 (via Corepack)## Installation & Build

## üöÄ Installation
### Developer Experience

### For Jahia Administrators
### Interactive Features

```bash

1. Download the latest release package (`jsfaq-x.x.x.tgz`) - **TypeScript**: Full type safety throughout the codebase

2. In Jahia Administration, go to **Server Settings ‚Üí System Components ‚Üí Modules**

3. Click **Upload Module** and select the package file- **CSS Modules**: Scoped styling with no conflicts- **Real-time Search**: Full-text search across questions and answersyarn install # install dependencies

4. The module will be automatically installed and started

- **Hot Reload**: Development mode with instant updates

### For Developers

- **Modern Tooling**: Vite build system, ESLint, Prettier- **Collapsible Items**: Click to expand/collapse FAQ items with smooth animationsyarn build # emit dist/server and dist/client bundles

````bash

# Clone the repository## üìã Requirements- **Auto-expand on Search**: Matching items automatically open with highlighted keywordsyarn package # produce dist/package.tgz ready for Jahia upload

git clone <repository-url>

cd jsfaq- **Jahia**: Version 8.2 or higher- **Tag Filtering**: Filter questions by tags (if configured)```



# Install dependencies- **Node.js**: Version 22.0.0 or higher

yarn install

- **Yarn**: Version 4.10.3 (via Corepack)- **URL Hash Support**: Deep linking to specific questions via URL fragments

# Build the module

yarn build## üöÄ Installation## Authoring Workflow



# Package for deployment### For Jahia Administrators### Developer Experience1. In Jahia, create a `jsfaqnt:faqPage`, provide the localized title and optional intro rich text.

yarn package

1. Download the latest release package (`jsfaq-x.x.x.tgz`)- **TypeScript**: Full type safety throughout the codebase2. Add `jsfaqnt:faqSection` nodes for logical groups (title + description), then drop `jsfaqnt:faqItem` entries inside each section.

# Deploy to Jahia (requires .env configuration)

yarn deploy2. In Jahia Administration, go to **Server Settings ‚Üí System Components ‚Üí Modules**

````

3. Click **Upload Module** and select the package file- **CSS Modules**: Scoped styling with no conflicts3. Use standalone `jsfaqnt:faqItem` children on the page for uncategorised questions.

## üîß Development Setup

4. The module will be automatically installed and started

### Environment Configuration

- **Hot Reload**: Development mode with instant updates4. Populate question, answer (rich text), optional tags, `isFeatured`, and `order`. Publish when ready‚ÄîSSR ensures LIVE pages work with JS disabled.

Create a `.env` file in the project root:

### For Developers

````env

JAHIA_URL=http://localhost:8080- **Modern Tooling**: Vite build system, ESLint, Prettier

JAHIA_USERNAME=root

JAHIA_PASSWORD=your-password```bash

````

# Clone the repository## Architecture Overview

### Available Scripts

git clone <repository-url>

```bash

yarn build          # Build production bundlescd jsfaq## üìã Requirements

yarn dev            # Start development mode with watch

yarn package        # Create deployment package

yarn deploy         # Deploy to Jahia instance

yarn lint           # Run ESLint# Install dependencies| Concern | Location / Notes |

yarn format         # Format code with Prettier

yarn clean          # Remove build artifactsyarn install

```

- **Jahia**: Version 8.2 or higher| -------------------- | -------------------------------------------------- |

### Development Workflow

# Build the module

```bash

# Start development mode (auto-rebuild on changes)yarn build- **Node.js**: Version 22.0.0 or higher| Content Model | `settings/definitions.cnd` + `src/components/Faq*/definition.cnd` |

yarn dev



# In another terminal, watch and deploy

yarn watch:callback# Package for deployment- **Yarn**: Version 4.10.3 (via Corepack)| Server Rendering | `src/components/FaqPage/default.server.tsx`, `src/components/FaqSection/default.server.tsx`, `src/components/FaqItem/default.server.tsx` (shared utilities in `src/components/FaqPage/serverUtils.tsx`) |

```

yarn package

## üìù Content Authoring

| Client Islands | `src/components/FaqPage/FaqPage.client.tsx` with presentational parts in `src/components/FaqPage/`, `src/components/FaqSection/`, `src/components/FaqItem/` |

### Creating an FAQ Page

# Deploy to Jahia (requires .env configuration)

1. In Jahia Edit Mode, create a new page or content area

2. Add a **FAQ Page** component (`jsfaqnt:faqPage`)yarn deploy## üöÄ Installation| GraphQL Helpers | `src/graphql/faq.ts` |

3. Configure the page:
   - **Title**: Main heading for the FAQ```

   - **Intro**: Optional introduction text (supports rich text)

| JSON-LD Builder | `src/server/schemaOrg.ts` + HTML sanitizer in `src/server/sanitize.ts` |

### Adding FAQ Sections (Optional)

## üîß Development Setup

1. Inside the FAQ Page, add **FAQ Section** components (`jsfaqnt:faqSection`)

2. Configure each section:### For Jahia Administrators| Styling | `src/styles/index.css` with CSS variables & focus states |
   - **Section Title**: Heading for this group of questions

   - **Section Description**: Optional description (supports rich text)### Environment Configuration

### Adding FAQ Items| Locales | `locales/en.json`, `locales/fr.json` |

1. Add **FAQ Item** components (`jsfaqnt:faqItem`) either:Create a `.env` file in the project root:
   - Inside FAQ Sections (for organized content)

   - Directly in the FAQ Page (for standalone questions)1. Download the latest release package (`jsfaq-x.x.x.tgz`)

2. Configure each item:
   - **Question**: The question text```env

   - **Answer**: The answer (supports rich text/HTML)

   - **Tags**: Use Jahia's native tagging (see below)JAHIA_URL=http://localhost:80802. In Jahia Administration, go to **Server Settings ‚Üí System Components ‚Üí Modules**## Customization

   - **Featured**: Mark important questions to highlight them

JAHIA_USERNAME=root

### Adding Tags to FAQ Items

JAHIA_PASSWORD=your-password3. Click **Upload Module** and select the package file- Theme via CSS custom properties (see `:root` tokens in `src/styles/index.css`).

This module uses **Jahia's native tagging system** (`jmix:tagged`):

`````

1. The `jsfaqnt:faqItem` content type includes the `jmix:tagged` mixin

2. Use Jahia's standard tag picker in the content editor4. The module will be automatically installed and started- Toggle features by adjusting island behaviour in `src/components/FaqPage/FaqPage.client.tsx` (e.g., disable featured-first or hash syncing).

3. Tags automatically appear as:

   - **Filter buttons** at the top of the FAQ page (clickable to filter questions)### Available Scripts

   - Selected tags show visual feedback with darker styling

   - **Small badges** below each answer when expanded- Extend GraphQL query fields in `src/graphql/faq.ts` when adding new properties to `jsfaqnt:*` types.

4. Tag badges are displayed only when the FAQ item is expanded (collapsed by default)

````bash

**Note**: Tags are stored in Jahia's standard `j:tagList` property, ensuring compatibility with Jahia's built-in tagging features.

yarn build          # Build production bundles### For Developers

### Content Structure Example

yarn dev            # Start development mode with watch

`````

FAQ Pageyarn package # Create deployment package## Accessibility & i18n

‚îú‚îÄ‚îÄ FAQ Section: "Getting Started"

‚îÇ ‚îú‚îÄ‚îÄ FAQ Item: "How do I create an account?"yarn deploy # Deploy to Jahia instance

‚îÇ ‚îú‚îÄ‚îÄ FAQ Item: "What payment methods are accepted?"

‚îÇ ‚îî‚îÄ‚îÄ FAQ Item: "Is there a mobile app?"yarn lint # Run ESLint```bash

‚îú‚îÄ‚îÄ FAQ Section: "Troubleshooting"

‚îÇ ‚îú‚îÄ‚îÄ FAQ Item: "I forgot my password"yarn format # Format code with Prettier- Disclosure buttons carry `aria-expanded`/`aria-controls`; answers are mapped to accessible regions.

‚îÇ ‚îî‚îÄ‚îÄ FAQ Item: "Why can't I log in?"

‚îî‚îÄ‚îÄ FAQ Item: "Contact support" (standalone)yarn clean # Remove build artifacts

````

```# Clone the repository- Focus rings remain visible; motion reduces automatically under `prefers-reduced-motion`.

## üèóÔ∏è Architecture



### Content Types

### Development Workflowgit clone <repository-url>- Localized UI strings resolve through the `data-faq-props` payload, defaulting to English when a language file is missing.

| Node Type | Description | Key Properties | Mixins |

| --------- | ----------- | -------------- | ------ |

| `jsfaqnt:faqPage` | Main FAQ container | `jcr:title`, `intro` | - |

| `jsfaqnt:faqSection` | Optional section grouping | `sectionTitle`, `sectionDescription` | - |```bashcd jsfaq

| `jsfaqnt:faqItem` | Individual FAQ entry | `question`, `answer`, `featured` | `jmix:tagged` |

# Start development mode (auto-rebuild on changes)

**Note**: Tags are managed through Jahia's native `jmix:tagged` mixin using the `j:tagList` property.

yarn dev## Validation

### Project Structure



````

jsfaq/# In another terminal, watch and deploy# Install dependencies- Confirm build integrity: `yarn build`.

‚îú‚îÄ‚îÄ src/

‚îÇ ‚îú‚îÄ‚îÄ components/yarn watch:callback

‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ FaqPage/

‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ default.server.tsx # Server-side rendering```yarn install- Upload `dist/package.tgz` to Jahia Modules. Content renders fully without client JavaScript.

‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ FaqPage.client.tsx # Client-side hydration (Island)

‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ definition.cnd # Content type definition

‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ... # Sub-components

‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ FaqSection/## üìù Content Authoring- Validate the generated JSON-LD block using Google‚Äôs [Rich Results Test](https://search.google.com/test/rich-results).

‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ default.server.tsx

‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ definition.cnd

‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ FaqSection.tsx

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ FaqItem/### Creating an FAQ Page# Build the module

‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ default.server.tsx

‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ definition.cnd

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ FaqItem.tsx

‚îÇ ‚îú‚îÄ‚îÄ server/1. In Jahia Edit Mode, create a new page or content areayarn build

‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ schemaOrg.ts # JSON-LD generation

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ sanitize.ts # HTML sanitization2. Add a **FAQ Page** component (`jsfaqnt:faqPage`)

‚îÇ ‚îú‚îÄ‚îÄ styles/

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ faq.module.css # CSS modules styling3. Configure the page:# Package for deployment

‚îÇ ‚îî‚îÄ‚îÄ types.ts # TypeScript definitions

‚îú‚îÄ‚îÄ locales/ - **Title**: Main heading for the FAQ

‚îÇ ‚îú‚îÄ‚îÄ en.json # English strings

‚îÇ ‚îî‚îÄ‚îÄ fr.json # French strings - **Intro**: Optional introduction text (supports rich text)yarn package

‚îú‚îÄ‚îÄ settings/

‚îÇ ‚îî‚îÄ‚îÄ definitions.cnd # Jahia content definitions - **Featured First**: Toggle to show featured items first

‚îî‚îÄ‚îÄ dist/ # Build output

````# Deploy to Jahia (requires .env configuration)



### Component Flow### Adding FAQ Sections (Optional)



1. **Server-Side**: `default.server.tsx` files render initial HTML with all contentyarn deploy

2. **Data Serialization**: FAQ data serialized to JSON in a `<script>` tag

3. **Client Hydration**: `FaqPage.client.tsx` Island component adds interactivity1. Inside the FAQ Page, add **FAQ Section** components (`jsfaqnt:faqSection`)

4. **Schema.org**: JSON-LD script automatically generated for SEO

2. Configure each section:```

## üé® Customization

   - **Section Title**: Heading for this group of questions

### Styling

   - **Section Description**: Optional description (supports rich text)## üîß Development Setup

The module uses CSS Modules with scoped class names. To customize styles:



1. Edit `src/styles/faq.module.css`

2. Rebuild the module: `yarn build`### Adding FAQ Items### Environment Configuration



Key CSS classes:



- `.jsfaq` - Main container1. Add **FAQ Item** components (`jsfaqnt:faqItem`) either:Create a `.env` file in the project root:

- `.jsfaq__header` - Header section

- `.jsfaq__search` - Search bar container   - Inside FAQ Sections (for organized content)

- `.jsfaq-item` - Individual FAQ item

- `.jsfaq-item--open` - Opened item state   - Directly in the FAQ Page (for standalone questions)```env

- `.jsfaq-item__tag` - Individual tag badges (0.75rem, 12px radius)

- `.jsfaq-tag` - Tag filter buttons2. Configure each item:JAHIA_URL=http://localhost:8080

- `.jsfaq-tag--active` - Active/selected tag button state

   - **Question**: The question textJAHIA_USERNAME=root

### Adding Custom Fields

   - **Answer**: The answer (supports rich text/HTML)JAHIA_PASSWORD=your-password

1. Update content type in `src/components/Faq*/definition.cnd`

2. Update TypeScript types in `src/types.ts`   - **Tags**: Use Jahia's native tagging (see below)```

3. Modify server rendering in `default.server.tsx` files

4. Update client component if needed   - **Featured**: Mark important questions to highlight them



### Internationalization### Available Scripts



Add or modify translations in `locales/`:### Adding Tags to FAQ Items



```json```bash

// locales/en.json

{This module uses **Jahia's native tagging system** via the `jmix:tagged` mixin:yarn build          # Build production bundles

  "searchPlaceholder": "Search FAQ...",

  "noResults": "No results found",yarn dev            # Start development mode with watch

  "featured": "Featured",

  "tagsLabel": "Filter by tags"1. The `jsfaqnt:faqItem` content type automatically includes the `jmix:tagged` mixinyarn package        # Create deployment package

}

```2. In the content editor, use Jahia's standard tag picker to add tags to any FAQ itemyarn deploy         # Deploy to Jahia instance



## üîç SEO Best Practices3. Tags appear in two places:yarn lint           # Run ESLint



### Structured Data   - **Filter buttons** at the top of the FAQ page (click to filter questions by tag)yarn format         # Format code with Prettier



The module automatically generates FAQPage structured data that includes:   - **Small badges** below each answer when the item is expandedyarn clean          # Remove build artifacts



- All questions and answers4. Tags are only visible when the FAQ item is expanded (items start collapsed by default)```

- Proper schema.org markup

- Plain text conversion of HTML answers



Example JSON-LD output:**Note**: Tags are stored in Jahia's standard `j:tagList` property, ensuring compatibility with Jahia's built-in tagging features.### Development Workflow



```json

{

  "@context": "https://schema.org",### Content Structure Example```bash

  "@type": "FAQPage",

  "mainEntity": [# Start development mode (auto-rebuild on changes)

    {

      "@type": "Question",```yarn dev

      "name": "How do I create an account?",

      "acceptedAnswer": {FAQ Page

        "@type": "Answer",

        "text": "To create an account, click the Sign Up button..."‚îú‚îÄ‚îÄ FAQ Section: "Getting Started"# In another terminal, watch and deploy

      }

    }‚îÇ   ‚îú‚îÄ‚îÄ FAQ Item: "How do I create an account?"yarn watch:callback

  ]

}‚îÇ   ‚îú‚îÄ‚îÄ FAQ Item: "What payment methods are accepted?"```

````

‚îÇ ‚îî‚îÄ‚îÄ FAQ Item: "Is there a mobile app?"

### Validation

‚îú‚îÄ‚îÄ FAQ Section: "Troubleshooting"## üìù Content Authoring

Test your FAQ structured data:

‚îÇ ‚îú‚îÄ‚îÄ FAQ Item: "I forgot my password"

1. Visit your FAQ page

2. Copy the URL‚îÇ ‚îî‚îÄ‚îÄ FAQ Item: "Why can't I log in?"### Creating an FAQ Page

3. Use [Google Rich Results Test](https://search.google.com/test/rich-results)

4. Verify FAQPage markup is detected‚îî‚îÄ‚îÄ FAQ Item: "Contact support" (standalone)

### Search Engine Benefits```1. In Jahia Edit Mode, create a new page or content area

‚úÖ Rich snippets in Google search results 2. Add a **FAQ Page** component (`jsfaqnt:faqPage`)

‚úÖ Expandable Q&A directly in search

‚úÖ Better voice assistant integration ## üèóÔ∏è Architecture3. Configure the page:

‚úÖ Improved page ranking for question queries

- **Title**: Main heading for the FAQ

## ‚ôø Accessibility

### Content Types - **Intro**: Optional introduction text (supports rich text)

- **Keyboard Navigation**: Full keyboard support for all interactions

- **ARIA Labels**: Proper `aria-expanded`, `aria-controls`, `aria-pressed`, and `aria-labelledby` - **Featured First**: Toggle to show featured items first

- **Focus Management**: Visible focus indicators

- **Screen Readers**: Semantic HTML with proper regions and landmarks| Node Type | Description | Key Properties | Mixins |

- **Reduced Motion**: Respects `prefers-reduced-motion` settings

| -------------------- | ------------------------- | -------------------------------------------- | ------------- |### Adding FAQ Sections (Optional)

## üêõ Troubleshooting

| `jsfaqnt:faqPage` | Main FAQ container | `jcr:title`, `intro`, `featuredFirstDefault` | - |

### Items Don't Collapse

| `jsfaqnt:faqSection` | Optional section grouping | `sectionTitle`, `sectionDescription` | - |1. Inside the FAQ Page, add **FAQ Section** components (`jsfaqnt:faqSection`)

- Clear browser cache and reload

- Check browser console for JavaScript errors| `jsfaqnt:faqItem` | Individual FAQ entry | `question`, `answer`, `featured` | `jmix:tagged` |2. Configure each section:

- Verify the client bundle loaded: `/modules/jsfaq/dist/client/components/FaqPage/FaqPage.client.tsx.js`
  - **Section Title**: Heading for this group of questions

### Search Not Working

**Note**: Tags are managed through Jahia's native `jmix:tagged` mixin using the `j:tagList` property, which is a multi-value string array. - **Section Description**: Optional description (supports rich text)

- Ensure items contain text content

- Check that the FAQ data script tag is present: `<script type="application/json" data-faq-props>`

- Verify no JavaScript errors in console

### Project Structure### Adding FAQ Items

### Tag Filters Not Showing

- Verify that at least one FAQ item has tags assigned

- Check that tags are added in Jahia's content editor using the tag picker```1. Add **FAQ Item** components (`jsfaqnt:faqItem`) either:

- Tag filter buttons only appear when there are tags to display

- View the HTML source to confirm `j:tagList` property contains valuesjsfaq/ - Inside FAQ Sections (for organized content)

### Tag Selection Not Visible‚îú‚îÄ‚îÄ src/ - Directly in the FAQ Page (for standalone questions)

- Check that the `data-faq-tag-active-class` attribute is present on the FAQ root element‚îÇ ‚îú‚îÄ‚îÄ components/2. Configure each item:

- Verify CSS modules are loading correctly

- Selected tags should have darker background and bold text‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ FaqPage/ - **Question**: The question text

### Schema.org Not Detected‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ default.server.tsx # Server-side rendering - **Answer**: The answer (supports rich text/HTML)

- Use browser DevTools to find `<script type="application/ld+json">`‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ FaqPage.client.tsx # Client-side hydration (Island) - **Tags**: Use Jahia's native tagging (mixin `jmix:tagged` with `j:tagList` property)

- Validate JSON structure is correct

- Ensure answers have content (empty answers are excluded)‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ definition.cnd # Content type definition - **Featured**: Mark important questions to highlight them

## üì¶ Build Output‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ... # Sub-components

After building, the module produces:‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ FaqSection/### Adding Tags to FAQ Items

`````‚îÇ ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ default.server.tsx

dist/

‚îú‚îÄ‚îÄ client/‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ definition.cndThis module uses **Jahia's native tagging system** (`jmix:tagged`):

‚îÇ   ‚îî‚îÄ‚îÄ components/FaqPage/

‚îÇ       ‚îî‚îÄ‚îÄ FaqPage.client.tsx.js      # ~8KB (gzipped: ~2.5KB)‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ FaqSection.tsx

‚îú‚îÄ‚îÄ server/

‚îÇ   ‚îî‚îÄ‚îÄ index.js                        # ~18KB‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ FaqItem/1. The `jsfaqnt:faqItem` content type includes the `jmix:tagged` mixin

‚îú‚îÄ‚îÄ assets/

‚îÇ   ‚îî‚îÄ‚îÄ style.css                       # ~8KB‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ default.server.tsx2. Use Jahia's standard tag picker in the content editor

‚îî‚îÄ‚îÄ package.tgz                         # Deployment package

```‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ definition.cnd3. Tags automatically appear as:



## üìÑ License‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ FaqItem.tsx   - **Filter buttons** at the top of the FAQ page (clickable to filter questions)



[Add your license here]‚îÇ   ‚îú‚îÄ‚îÄ server/   - **Small badges** below each answer when expanded



## ü§ù Contributing‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemaOrg.ts              # JSON-LD generation4. Tags are displayed only when the FAQ item is expanded (collapsed by default)



[Add contribution guidelines here]‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sanitize.ts               # HTML sanitization



## üìû Support‚îÇ   ‚îú‚îÄ‚îÄ styles/### Content Structure Example



For issues and questions:‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ faq.module.css            # CSS modules styling



- GitHub Issues: [repository-url]/issues‚îÇ   ‚îî‚îÄ‚îÄ types.ts                       # TypeScript definitions```

- Jahia Community: https://community.jahia.com

‚îú‚îÄ‚îÄ locales/FAQ Page

## üîÑ Version History

‚îÇ   ‚îú‚îÄ‚îÄ en.json                        # English strings‚îú‚îÄ‚îÄ FAQ Section: "Getting Started"

### 0.0.1 (Current)

‚îÇ   ‚îî‚îÄ‚îÄ fr.json                        # French strings‚îÇ   ‚îú‚îÄ‚îÄ FAQ Item: "How do I create an account?"

- Initial release

- Server-side rendering with RenderChildren pattern‚îú‚îÄ‚îÄ settings/‚îÇ   ‚îú‚îÄ‚îÄ FAQ Item: "What payment methods are accepted?"

- Client-side search with keyword highlighting

- Collapsible items with smooth animations‚îÇ   ‚îî‚îÄ‚îÄ definitions.cnd                # Jahia content definitions‚îÇ   ‚îî‚îÄ‚îÄ FAQ Item: "Is there a mobile app?"

- Schema.org FAQPage structured data

- CSS Modules styling‚îî‚îÄ‚îÄ dist/                              # Build output‚îú‚îÄ‚îÄ FAQ Section: "Troubleshooting"

- EN/FR localization support

- **Native Jahia tagging**: Uses `jmix:tagged` mixin with `j:tagList` property```‚îÇ   ‚îú‚îÄ‚îÄ FAQ Item: "I forgot my password"

- Tag filtering with visual feedback for selected tags

- Tag badges display inside collapsible answers‚îÇ   ‚îî‚îÄ‚îÄ FAQ Item: "Why can't I log in?"



---### Component Flow‚îî‚îÄ‚îÄ FAQ Item: "Contact support" (standalone)



Built with ‚ù§Ô∏è for Jahia 8.2+````


1. **Server-Side**: `default.server.tsx` files render initial HTML with all content

2. **Data Serialization**: FAQ data serialized to JSON in a `<script>` tag## üèóÔ∏è Architecture

3. **Client Hydration**: `FaqPage.client.tsx` Island component adds interactivity

4. **Schema.org**: JSON-LD script automatically generated for SEO### Content Types

### Server-Side Rendering| Node Type | Description | Key Properties | Mixins |

| -------------------- | ------------------------- | -------------------------------------------- | ------------- |

Each component has a `default.server.tsx` file that:| `jsfaqnt:faqPage` | Main FAQ container | `jcr:title`, `intro`, `featuredFirstDefault` | - |

| `jsfaqnt:faqSection` | Optional section grouping | `sectionTitle`, `sectionDescription` | - |

- Retrieves content from Jahia JCR| `jsfaqnt:faqItem` | Individual FAQ entry | `question`, `answer`, `featured` | `jmix:tagged` |

- Uses `RenderChildren` helper for nested components

- Renders semantic HTML**Note:** Tags are managed through Jahia's native `jmix:tagged` mixin using the `j:tagList` property.

- Serializes data for client hydration

### Project Structure

### Client-Side Islands

`````

The `FaqPage.client.tsx` Island component provides:jsfaq/

‚îú‚îÄ‚îÄ src/

- Search functionality with keyword highlighting‚îÇ ‚îú‚îÄ‚îÄ components/

- Collapsible items (start closed, auto-expand on search)‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ FaqPage/

- Tag filtering‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ default.server.tsx # Server-side rendering

- Featured item ordering‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ FaqPage.client.tsx # Client-side hydration

- State management‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ definition.cnd # Content type definition

‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ... # Sub-components

## üé® Customization‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ FaqSection/

‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ default.server.tsx

### Styling‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ definition.cnd

‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ FaqSection.tsx

The module uses CSS Modules with scoped class names. To customize styles:‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ FaqItem/

‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ default.server.tsx

1. Edit `src/styles/faq.module.css`‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ definition.cnd

2. Rebuild the module: `yarn build`‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ FaqItem.tsx

‚îÇ ‚îú‚îÄ‚îÄ server/

Key CSS classes:‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ schemaOrg.ts # JSON-LD generation

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ sanitize.ts # HTML sanitization

- `.jsfaq` - Main container‚îÇ ‚îú‚îÄ‚îÄ styles/

- `.jsfaq__header` - Header section‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ faq.module.css # CSS modules styling

- `.jsfaq__search` - Search bar container‚îÇ ‚îî‚îÄ‚îÄ types.ts # TypeScript definitions

- `.jsfaq-item` - Individual FAQ item‚îú‚îÄ‚îÄ locales/

- `.jsfaq-item--open` - Opened item state‚îÇ ‚îú‚îÄ‚îÄ en.json # English strings

- `.jsfaq-item__tag` - Individual tag badges (0.75rem, 12px radius)‚îÇ ‚îî‚îÄ‚îÄ fr.json # French strings

- `.jsfaq-tag` - Tag filter buttons‚îú‚îÄ‚îÄ settings/

‚îÇ ‚îî‚îÄ‚îÄ definitions.cnd # Jahia content definitions

### Adding Custom Fields‚îî‚îÄ‚îÄ dist/ # Build output

`````

1. Update content type in `src/components/Faq*/definition.cnd`

2. Update TypeScript types in `src/types.ts`### Component Flow

3. Modify server rendering in `default.server.tsx` files

4. Update client component if needed1. **Server-Side**: `default.server.tsx` files render initial HTML with all content

5. **Data Serialization**: FAQ data serialized to JSON in a `<script>` tag

### Internationalization3. **Client Hydration**: `FaqPage.client.tsx` Island component adds interactivity

4. **Schema.org**: JSON-LD script automatically generated for SEO

Add or modify translations in `locales/`:

## üé® Customization

````json

// locales/en.json### Styling

{

  "searchPlaceholder": "Search FAQ...",The module uses CSS Modules with scoped class names. To customize styles:

  "noResults": "No results found",

  "featured": "Featured",1. Edit `src/styles/faq.module.css`

  "allTags": "All"2. Rebuild the module: `yarn build`

}

```Key CSS classes:



## üîç SEO Best Practices- `.jsfaq` - Main container

- `.jsfaq__header` - Header section

### Structured Data- `.jsfaq__search` - Search bar container

- `.jsfaq-item` - Individual FAQ item

The module automatically generates FAQPage structured data that includes:- `.jsfaq-item--open` - Opened item state



- All questions and answers### Adding Custom Fields

- Proper schema.org markup

- Plain text conversion of HTML answers1. Update content type in `src/components/Faq*/definition.cnd`

2. Update TypeScript types in `src/types.ts`

Example JSON-LD output:3. Modify server rendering in `default.server.tsx` files

4. Update client component if needed

```json

{### Internationalization

  "@context": "https://schema.org",

  "@type": "FAQPage",Add or modify translations in `locales/`:

  "mainEntity": [

    {```json

      "@type": "Question",// locales/en.json

      "name": "How do I create an account?",{

      "acceptedAnswer": {  "searchPlaceholder": "Search FAQ...",

        "@type": "Answer",  "noResults": "No results found",

        "text": "To create an account, click the Sign Up button..."  "featured": "Featured"

      }}

    }```

  ]

}## üîç SEO Best Practices

`````

### Structured Data

### Validation

The module automatically generates FAQPage structured data that includes:

Test your FAQ structured data:

- All questions and answers

1. Visit your FAQ page- Proper schema.org markup

2. Copy the URL- Plain text conversion of HTML answers

3. Use [Google Rich Results Test](https://search.google.com/test/rich-results)

4. Verify FAQPage markup is detected### Validation

### Search Engine BenefitsTest your FAQ structured data:

‚úÖ Rich snippets in Google search results 1. Visit your FAQ page

‚úÖ Expandable Q&A directly in search 2. Copy the URL

‚úÖ Better voice assistant integration 3. Use [Google Rich Results Test](https://search.google.com/test/rich-results)

‚úÖ Improved page ranking for question queries4. Verify FAQPage markup is detected

## ‚ôø Accessibility### Search Engine Benefits

- **Keyboard Navigation**: Full keyboard support for all interactions‚úÖ Rich snippets in Google search results

- **ARIA Labels**: Proper `aria-expanded`, `aria-controls`, and `aria-labelledby`‚úÖ Expandable Q&A directly in search

- **Focus Management**: Visible focus indicators‚úÖ Better voice assistant integration

- **Screen Readers**: Semantic HTML with proper regions and landmarks‚úÖ Improved page ranking for question queries

- **Reduced Motion**: Respects `prefers-reduced-motion` settings

## ‚ôø Accessibility

## üêõ Troubleshooting

- **Keyboard Navigation**: Full keyboard support for all interactions

### Items Don't Collapse- **ARIA Labels**: Proper `aria-expanded`, `aria-controls`, and `aria-labelledby`

- **Focus Management**: Visible focus indicators

- Clear browser cache and reload- **Screen Readers**: Semantic HTML with proper regions and landmarks

- Check browser console for JavaScript errors- **Reduced Motion**: Respects `prefers-reduced-motion` settings

- Verify the client bundle loaded: `/modules/jsfaq/dist/client/components/FaqPage/FaqPage.client.tsx.js`

## üêõ Troubleshooting

### Search Not Working

### Items Don't Collapse

- Ensure items contain text content

- Check that the FAQ data script tag is present: `<script type="application/json" data-faq-props>`- Clear browser cache and reload

- Verify no JavaScript errors in console- Check browser console for JavaScript errors

- Verify the client bundle loaded: `/modules/jsfaq/dist/client/components/FaqPage/FaqPage.client.tsx.js`

### Tags Not Showing

### Search Not Working

- Verify that the `jmix:tagged` mixin is applied to FAQ items

- Check that tags are added in Jahia's content editor using the tag picker- Ensure items contain text content

- Tags only appear when FAQ items are expanded (collapsed by default)- Check that the FAQ data script tag is present: `<script type="application/json" data-faq-props>`

- View the HTML source to confirm `j:tagList` property contains values- Verify no JavaScript errors in console

### Schema.org Not Detected### Schema.org Not Detected

- Use browser DevTools to find `<script type="application/ld+json">`- Use browser DevTools to find `<script type="application/ld+json">`

- Validate JSON structure is correct- Validate JSON structure is correct

- Ensure answers have content (empty answers are excluded)- Ensure answers have content (empty answers are excluded)

## üì¶ Build Output## üì¶ Build Output

After building, the module produces:After building, the module produces:

```

dist/dist/

‚îú‚îÄ‚îÄ client/‚îú‚îÄ‚îÄ client/

‚îÇ   ‚îî‚îÄ‚îÄ components/FaqPage/‚îÇ   ‚îî‚îÄ‚îÄ components/FaqPage/

‚îÇ       ‚îî‚îÄ‚îÄ FaqPage.client.tsx.js      # ~8KB (gzipped: ~2.5KB)‚îÇ       ‚îî‚îÄ‚îÄ FaqPage.client.tsx.js      # ~8KB (gzipped: ~2.5KB)

‚îú‚îÄ‚îÄ server/‚îú‚îÄ‚îÄ server/

‚îÇ   ‚îî‚îÄ‚îÄ index.js                        # ~17KB‚îÇ   ‚îî‚îÄ‚îÄ index.js                        # ~16KB

‚îú‚îÄ‚îÄ assets/‚îú‚îÄ‚îÄ assets/

‚îÇ   ‚îî‚îÄ‚îÄ faq.module.css                  # ~8KB‚îÇ   ‚îî‚îÄ‚îÄ style.css                       # ~8KB

‚îî‚îÄ‚îÄ package.tgz                         # Deployment package‚îî‚îÄ‚îÄ package.tgz                         # Deployment package

```

## üìÑ License## üìÑ License

[Add your license here][Add your license here]

## ü§ù Contributing## ü§ù Contributing

[Add contribution guidelines here][Add contribution guidelines here]

## üìû Support## üìû Support

For issues and questions:For issues and questions:

- GitHub Issues: [repository-url]/issues- GitHub Issues: [repository-url]/issues

- Jahia Community: https://community.jahia.com- Jahia Community: https://community.jahia.com

## üîÑ Version History## üîÑ Version History

### 0.0.1 (Current)### 0.0.1 (Current)

- Initial release- Initial release

- Server-side rendering with RenderChildren pattern- Server-side rendering with RenderChildren pattern

- Client-side search with keyword highlighting- Client-side search with keyword highlighting

- Collapsible items with smooth animations- Collapsible items with smooth animations

- Schema.org FAQPage structured data- Schema.org FAQPage structured data

- CSS Modules styling- CSS Modules styling

- EN/FR localization support- EN/FR localization support

- **Native Jahia tagging**: Uses `jmix:tagged` mixin with `j:tagList` property
- Tag filtering and badge display

---

Built with ‚ù§Ô∏è for Jahia 8.2+
